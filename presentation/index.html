<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.2.1/reveal.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.2.1/reset.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.2.1/theme/black.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/github-dark.min.css" />
    <link rel="stylesheet" href="style.css" />
    <title>Procedural Planet Presentation</title>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <!-- data-background-iframe="https://pannacotta98.github.io/procedural-images-project?nogui" -->
        <section data-background-image="./assets/pexels-nicole-avagliano-2706654.jpg" data-background-opacity="0.3">
          <h1>Procedural Planet</h1>
          <br />
          Algot Sandahl
        </section>

        <section data-background-image="./assets/pexels-nicole-avagliano-2706654.jpg" data-background-opacity="0.3">
          <h2>Tech</h2>
          <p>TypeScript</p>
          <p>WebGL</p>
          <p>Three.js</p>
          <p>Snowpack</p>
        </section>

        <!-- ==== Terrain ====  -->
        <section data-background-image="./assets/terrain.jpg" data-background-opacity="0.3">
          <h2>Terrain Generation</h2>
        </section>

        <section data-background-image="./assets/terrain.jpg" data-background-opacity="0.2">
          <section>Geometry</section>
          <section>
            <p>UV sphere</p>
            <iframe
              src="https://threejs.org/docs/scenes/geometry-browser.html#SphereGeometry"
              frameborder="0"
              width="1000"
              height="500"
            ></iframe>
          </section>
          <section>
            <p>Icosphere</p>
            <iframe
              src="https://threejs.org/docs/scenes/geometry-browser.html#IcosahedronGeometry"
              frameborder="0"
              width="1000"
              height="500"
            ></iframe>
          </section>
        </section>

        <section data-background-image="./assets/terrain.jpg" data-background-opacity="0.2">
          <section>Displacement</section>
          <section data-auto-animate>
            <p>Layered simplex noise</p>
            <pre data-id="displacement-code">
              <code data-line-numbers="1|2,7|3-4|5-6" class="language-glsl" data-trim data-noescape>
float heightOffset = 0.0;
for(int i = 0; i < numOctaves; ++i) {
  float noise = 0.5 + 0.5 * snoise(freq * pos);
  heightOffset += amp * noise;
  amp *= persistance; // Usually ≈ 0.5
  freq *= lacunarity; // Usually ≈ 2.0
}
              </code>
            </pre>
          </section>
          <section data-auto-animate>
            <pre data-id="displacement-code">
              <code data-line-numbers="2,6,10" class="language-glsl" data-trim data-noescape>
float heightOffset = 0.0;
float normalizeFactor = 0.0;
for(int i = 0; i < numOctaves; ++i) {
  float noise = 0.5 + 0.5 * snoise(freq * pos);
  heightOffset += amp * noise;
  normalizeFactor += amp;
  amp *= persistance; // Usually ≈ 0.5
  freq *= lacunarity; // Usually ≈ 2.0
}
heightOffset /= normalizeFactor;
              </code>
            </pre>
          </section>

          <section
            data-background-color="black"
            data-background-iframe="https://pannacotta98.github.io/procedural-planet?preset=presentation-terrain-no-exp"
            data-background-interactive
          ></section>

          <section data-auto-animate>
            <p>How do we get flatter fields and steeper mountains?</p>
          </section>

          <section data-auto-animate>
            <p>How do we get flatter fields and steeper mountains?</p>
            <iframe src="https://www.desmos.com/calculator/pknwk2m1i5" frameborder="0" width="1000" height="500"></iframe>
          </section>

          <section
            data-background-color="black"
            data-background-iframe="https://pannacotta98.github.io/procedural-planet?preset=presentation-terrain-no-exp"
            data-background-interactive
          ></section>
        </section>

        <section data-background-image="./assets/terrain.jpg" data-background-opacity="0.2">
          <section>Texture</section>
          <section>
            <img src="./assets/planet-only-land.png" alt="" width="400" />
          </section>
        </section>

        <!-- ==== Water ==== -->
        <section data-background-image="./assets/pexels-lisa-734973.jpg" data-background-opacity="0.3">
          <section data-auto-animate>
            <h2>Water</h2>
          </section>

          <section data-auto-animate>
            <h2>Water</h2>
            <p class="fragment strike">Refraction</p>
            <p class="fragment strike">Reflection</p>
            <p>The Fresnel effect</p>
            <p>Waves</p>
          </section>

          <section data-auto-animate>
            <h2>Water</h2>
            <p>The Fresnel effect</p>
            <p>Schlick&apos;s approximation:</p>
            <p>
              <div class="smaller-math">
                <!-- prettier-ignore -->
                \[R = R_0 + (1 - R_0) (1 - \mathbf N \cdot \mathbf V)^5\]
                \[R_0 = \left(\frac{n_1-n_2}{n_1+n_2} \right)^2\]
              </div>
            </p>
          </section>

          <section data-auto-animate>
            <h2>Water</h2>
            <p>Two types of waves:</p>
            <p>Spherical trochoidal waves</p>
            <p>Psrd noise bump map</p>
          </section>
        </section>

        <section data-auto-animate>
          <section data-background-image="./assets/pexels-lisa-734973.jpg" data-background-opacity="0.3" data-auto-animate>
            <p>Spherical trochoidal waves</p>
            <p><small>But first normal trochoidal waves in 2D</small></p>
            <video data-autoplay loop width="700" src="./assets/troch-waves.mp4"></video>
            <p>
              <small>
                Visualization by
                <a href="https://twitter.com/FreyaHolmer/status/1236079824575369219">@FreyaHolmer</a>
                on twitter
              </small>
            </p>
          </section>

          <section data-background-image="./assets/pexels-lisa-734973.jpg" data-background-opacity="0.3" data-auto-animate>
            <p>Spherical trochoidal waves</p>
            <p><small>But first normal trochoidal waves in 2D</small></p>
            <video data-autoplay loop src="./assets/troch-waves-spiky.mp4" width="700"></video>
            <p>
              <small>
                Visualization by
                <a href="https://twitter.com/FreyaHolmer/status/1236079824575369219">@FreyaHolmer</a>
                on twitter
              </small>
            </p>
          </section>

          <section data-background-image="./assets/pexels-lisa-734973.jpg" data-background-opacity="0.3" data-auto-animate>
            <p>Spherical trochoidal waves</p>
            <p>
              <small>
                Adapted to spheres by Florian Michelic in &ldquo;Real-Time Rendering of Procedurally Generated Planets&rdquo;
              </small>
            </p>
            <img class="fragment" src="./assets/spherical-troch-origin.png" width="400" alt="" />
          </section>

          <section
            data-background-color="black"
            data-background-iframe="https://pannacotta98.github.io/procedural-planet?nogui&preset=presentation-troch-waves-big"
            data-background-interactive
          ></section>
          <section
            data-background-color="black"
            data-background-iframe="https://pannacotta98.github.io/procedural-planet?nogui&preset=preset=presentation-troch-waves-with-land"
            data-background-interactive
          ></section>
        </section>

        <section>
          <p>Psrd noise bump map</p>
        </section>

        <!-- ==== Stars ==== -->
        <section data-background-image="./assets/pexels-nicole-avagliano-2706654.jpg" data-background-opacity="0.3">
          <h2>Stars</h2>
          Smoothstepped simplex noise
        </section>

        <!-- ==== Demo ==== -->
        <section data-background-iframe="https://pannacotta98.github.io/procedural-planet" data-background-interactive></section>

        <!-- ==== Conclusion ==== -->
        <section data-background-image="./assets/pexels-nicole-avagliano-2706654.jpg" data-background-opacity="0.3">
          <h2>Some Sort of Conclusion</h2>
          <aside class="notes">
            It would certainly be fun to add even more customizability, but at some point it starts becoming an engine rather than
            a course project.
          </aside>
        </section>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.2.1/reveal.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.2.1/plugin/highlight/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.2.1/plugin/math/math.min.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,
        plugins: [RevealHighlight, RevealMath.KaTeX],
        // Learn about plugins: https://revealjs.com/plugins/
        // plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      });
    </script>
  </body>
</html>
